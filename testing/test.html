<!DOCTYPE html>
<html>
    <head>
        <title>Example</title>

    </head>
    <body>
      <script type="importmap">
        {
          "imports": {
            "axios": "https://ga.jspm.io/npm:axios@1.0.0-alpha.1/index.js"
          },
          "scopes": {
            "https://ga.jspm.io/": {
              "#lib/adapters/http.js": "https://ga.jspm.io/npm:axios@1.0.0-alpha.1/lib/adapters/xhr.js",
              "#lib/platform/node/index.js": "https://ga.jspm.io/npm:axios@1.0.0-alpha.1/lib/platform/browser/index.js",
              "buffer": "https://ga.jspm.io/npm:@jspm/core@2.0.0-beta.24/nodelibs/browser/buffer.js",
              "form-data": "https://ga.jspm.io/npm:form-data@4.0.0/lib/browser.js"
            }
          }
        }
        </script>






      <script type="module">

        // clicked1 -> registration
      function clicked1() {

        var passwordinput = document.getElementById("input").value;
        var usernameinput = document.getElementById("input2").value;
        var emailinput = document.getElementById("input3").value;

        console.log(registration(passwordinput, usernameinput, emailinput));
      }

      window.clicked1 = clicked1;

      // clicked2 -> verification

  function clicked2() {

        var token = document.getElementById("input4").value;
        console.log(verification(token));
      }

      window.clicked2 = clicked2;



      import axios,* as others from "axios";

      function registration(password, username, email){
        var convertemail = email.toString()
        var convertuser = username.toString()
        var convertpass = password.toString()
        

            axios({
            url: 'http://127.0.0.1:8000/graphql',
            method: 'post',
            data: {
              query:
              `mutation register($emailed: String!, $usernamed: String!, $password1: String!, $password2: String!) {
  register(email: $emailed username: $usernamed, password1: $password1, password2: $password2) {
    success
    errors
    refreshToken
    token
    }
  }
`,
  variables: {
    emailed: convertemail,
    usernamed: convertuser,
    password1: convertpass,
    password2: convertpass
  }},

        }).then((result) => {
            // console.log(result["data"]]);
            console.log(result);
            console.log(result["data"]["data"])
            console.log(result["data"]["data"]["register"]["errors"]);
          });
}




      function verification(tokeninput){
        var token = tokeninput.toString()
        

            axios({
            url: 'http://127.0.0.1:8000/graphql',
            method: 'post',
            data: {
              query:
              `mutation verifyAccount($tokenize: String!) {
                verifyAccount(token: $tokenize) {
    success
    errors
    }
  }
`,
  variables: {
    tokenize: token
  }},

        }).then((result) => {
            // console.log(result["data"]]);
            console.log(result);
            console.log(result["data"]["data"])
            console.log(result["data"]["data"]["register"]["errors"]);
          });
      }




    </script>
      <p>registration test</p>

		<button onclick="window.clicked1()">Click me</button>

		<input id='input'> password </input>
		<input id='input2'> username </input>
      <input id='input3'> email </input>

<p>verification test</p>
<button onclick="window.clicked2()">Click me</button>


		<input id='input4'> token </input>



    </body>
</html>




